---
title: "Ramen Rating By Type/Style"
output: 
  html_document:
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
library(tidyverse)
library(knitr)
library(ggridges)
library(plotly)
library(patchwork)
```

```{r clean, include=FALSE}
tidy_ramen = 
  read_csv("./ramen-ratings.csv") %>% 
  janitor::clean_names() %>% 
  drop_na(style) %>% 
  separate(top_ten, into = c("year", "rank"), sep = " #", convert = TRUE) %>% 
  mutate(
    style = factor(style),
    country = factor(country),
    brand = factor(brand),
    stars = as.numeric(stars)
  )
```

## Background Introduction 
In this Ramen dataset, there are `r nrow(count(tidy_ramen, style))` ramen packaging types/styles. We wonder if different packaging styles may affect the texture and flavor of ramen - some of us prefer cup noodles, while some prefer packaged noodles. In the following adventure, let's see if the packaging style makes a difference!

![](pictures/package.jpg)
## Distribution of Rating by Style
First, let's take a look at the distribtion of ramen rating by packaging style. 
```{r, echo=FALSE, message=FALSE, warning=FALSE}
distri_various = 
  tidy_ramen %>%
  drop_na(stars) %>%
  ggplot(aes(x = style, y = stars, color = style)) + 
  geom_boxplot() +
  labs(
    title = "Rating Distribution",
    x = "Ramen Style",
    y = "Rating Stars"
  )

distri_various
```
According to the box plot, we can see that most ramens have rating scores higher than 3 stars out of 5. Bar, Box, and Can styles of ramens have limited number of records in our dataset, so the box plot results may be biased. Among other styles of ramens, bowl ramens tend to have higher rating scores comparing to others, while cup ramens seem to have lower rating scores (despite that pack ramens have the most outliers with low rating scores). 


## Counts of Ramens by Style
Now let's check the counts of ramens included in each style.
```{r, echo=FALSE, message=FALSE, warning=FALSE}
most_various = 
  tidy_ramen %>%
  group_by(style) %>%
  summarize(num_varieties = n()) %>%
  mutate(style = fct_reorder(style, num_varieties)) %>%
  plot_ly(x = ~style, y = ~num_varieties, color = ~style, type = "bar", 
          text = ~num_varieties, textposition = 'auto', 
          marker = list(color = 'viridis', 
                        line = list(color = 'viridis', width = 1.5))) %>% 
  layout(title = "Most common packing of ramen",
         xaxis = list(title = "Styles"),
         yaxis = list(title = "Number of Product")) 

most_various
```

We see that the most common style of packaging is Pack ramen. The median of rating for Tray, Cup, Can, Pack, Bowl ramens are similar (around 3.7 stars). The median of Bar and Box ramen has the highest rating. However, since the samples of Bar, Can, Box ramens are low, we might neglect them at this moment.


## Analysis of Ramen Rating Distribution by Style

We would love to know if the differences in rating scores are significant across different ramen packaging styles. To do this, we decided to conduct an Analysis of Variance (ANOVA) test. As shown in the box plot above, there are only few ramens classified as Bar, Can or Box styles, so we will drop these styles in the following analysis, as they are not representative. 




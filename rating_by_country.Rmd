---
title: "Rating by Countries"
output: 
  html_document:
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
library(tidyverse)
library(dplyr)
library(ggridges)

```

```{r, include=FALSE}
tidy_ramen = 
  read_csv("./ramen-ratings.csv") %>% 
  janitor::clean_names() %>% 
  separate(top_ten, into = c("year", "rank"), sep = " #", convert = TRUE) %>% 
  mutate(
    style = factor(style),
    country = factor(country),
    brand = factor(brand),
    stars = as.numeric(stars)
  )
```

## Background Introduction 
There are `r tidy_ramen %>% distinct(country) %>% summarize(count = n())` countries included in our Ramen dataset, with a total of `r nrow(tidy_ramen)` ramen varieties. 


## Top Ramen Produce Countries
The top three countries that produced the most ramens are Japan (n = 352), USA (n = 323), and South Korea (n = 309).

```{r, echo=FALSE, message=FALSE}
top3_country = 
  tidy_ramen %>%
  group_by(country) %>%
  summarize(count = n()) %>%
  arrange(desc(count)) %>%
  top_n(3) %>% 
  knitr::kable()

top3_country
```


### Rating Distribution among top ramen produce countries
Now let's take a closer look at the rating distribution among the top three ramen produce countries!
```{r, echo=FALSE, message=FALSE}
tidy_ramen_top3 = 
  tidy_ramen %>%
  filter(country == c("Japan", "USA", "South Korea")) %>%
  drop_na(stars) %>%
  ggplot(aes(x = stars, y = country, fill = country)) + 
  geom_density_ridges(scale = .85) +
  labs(
    title = "Ramen rating distribution among Japan, USA, and South Korea",
    x = "Stars (0-5)",
    y = "Country"
  )

tidy_ramen_top3
```

According to the graph, it appears that most ramens produced by these countries have a peak rating score around 4. South Korea also has a second but smaller peak at score 5. Comparing to South Korea and USA, Japan has relatively higher rating scores with more rating scores at 5. 



## Top Average Rating Countries

What are the top three countries that have the highest average rating scores on their ramens? Do you have any guess?
```{r, echo=FALSE, message=FALSE}
tidy_ramen %>%
  group_by(country) %>%
  drop_na(stars) %>%
  summarize(avg_rating = mean(stars)) %>%
  arrange(desc(avg_rating)) %>%
  head(3) %>%
  knitr::kable(digits = 2) 
```

Does the result differ from your expectation? It appears that Brazil had the highest average rating score (4.35 out of 5) among all countries, followed by Sarawak (score 4.33 out of 5) and Cambodia (score 4.20 out of 5).



## Bottom Average Rating Countries

What about the bottom three countries that have the lowest average rating scores on their ramens?
```{r, echo=FALSE, message=FALSE}
tidy_ramen %>%
  group_by(country) %>%
  drop_na(stars) %>%
  summarize(avg_rating = mean(stars)) %>%
  arrange(avg_rating) %>%
  head(3) %>%
  knitr::kable(digits = 2) 
```
Nigeria had the lowest average rating score (1.50 out of 5) among all countries, followed by Canada (score 2.24 out of 5) and Netherlands (score 2.48 out of 5).
